@import 'src/css/quasar.variables.scss';

// Reduced fireflies for better performance
$quantity: 5;

.firefly {
    position: fixed;
    left: 50%;
    top: 50%;
    width: 0.6vw;
    height: 0.6vw;
    margin: -0.2vw 0 0 9.8vw;
    pointer-events: none;
    z-index: 10;
    will-change: transform, opacity;
    
    // Use hardware acceleration
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;

    &--mobile {
        width: 2.1vw;
        height: 2.1vw;
    }

    &::before,
    &::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        will-change: transform, opacity;
        transform: translate3d(0, 0, 0);
    }

    &::before {
        background: $accent;
        opacity: 0.4;
        animation: drift 12s ease-in-out alternate infinite;
    }

    &::after {
        background: white;
        opacity: 0;
        box-shadow: 0 0 0vw 0vw $primary;
        animation: drift 15s ease-in-out alternate infinite, flash 8s ease-in-out infinite;
    }
}

// Optimized predefined animations instead of random generated ones
.firefly:nth-child(1) { animation: firefly1 25s ease-in-out infinite; }
.firefly:nth-child(2) { animation: firefly2 28s ease-in-out infinite 2s; }
.firefly:nth-child(3) { animation: firefly3 22s ease-in-out infinite 4s; }
.firefly:nth-child(4) { animation: firefly4 30s ease-in-out infinite 6s; }
.firefly:nth-child(5) { animation: firefly5 26s ease-in-out infinite 8s; }

// Optimized keyframes using transform3d for hardware acceleration
@keyframes firefly1 {
    0% { transform: translate3d(-20vw, -15vh, 0) scale(0.3); }
    25% { transform: translate3d(25vw, -25vh, 0) scale(0.6); }
    50% { transform: translate3d(-30vw, 20vh, 0) scale(0.4); }
    75% { transform: translate3d(35vw, 10vh, 0) scale(0.7); }
    100% { transform: translate3d(-20vw, -15vh, 0) scale(0.3); }
}

@keyframes firefly2 {
    0% { transform: translate3d(30vw, 20vh, 0) scale(0.4); }
    33% { transform: translate3d(-25vw, -10vh, 0) scale(0.8); }
    66% { transform: translate3d(15vw, -30vh, 0) scale(0.3); }
    100% { transform: translate3d(30vw, 20vh, 0) scale(0.4); }
}

@keyframes firefly3 {
    0% { transform: translate3d(-35vw, 5vh, 0) scale(0.5); }
    50% { transform: translate3d(20vw, -20vh, 0) scale(0.6); }
    100% { transform: translate3d(-35vw, 5vh, 0) scale(0.5); }
}

@keyframes firefly4 {
    0% { transform: translate3d(10vw, -25vh, 0) scale(0.6); }
    40% { transform: translate3d(-40vw, 15vh, 0) scale(0.4); }
    80% { transform: translate3d(25vw, 25vh, 0) scale(0.7); }
    100% { transform: translate3d(10vw, -25vh, 0) scale(0.6); }
}

@keyframes firefly5 {
    0% { transform: translate3d(-15vw, 30vh, 0) scale(0.3); }
    30% { transform: translate3d(40vw, -15vh, 0) scale(0.5); }
    70% { transform: translate3d(-20vw, -5vh, 0) scale(0.8); }
    100% { transform: translate3d(-15vw, 30vh, 0) scale(0.3); }
}

@keyframes drift {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes flash {
    0%, 30%, 100% {
        opacity: 0;
        box-shadow: 0 0 0vw 0vw $primary;
    }
    5% {
        opacity: 1;
        box-shadow: 0 0 2vw 0.4vw $primary;
    }
}